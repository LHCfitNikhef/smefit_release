
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>How to run the code &#8212; SMEFiT 3.1.1 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=f74d80cf" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=2d67777c"></script>
    <script src="../_static/doctools.js?v=fd6eb6e6"></script>
    <script src="../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'fitting_code/running';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="SMEFiT Tutorial" href="tutorial.html" />
    <link rel="prev" title="Code structure" href="code_struct.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">SMEFiT 3.1.1 documentation</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Theory:</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../theory/SMEFT.html">Standard Model Effective Field Theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../theory/general.html">Fitting assumptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../theory/NS.html">Nested Sampling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../theory/Analytic.html">Analytic solution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../theory/MCFit.html">The Monte Carlo replica method</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Data and theory tables:</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../data_theory/data.html">Experimental data format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_theory/theory.html">Theory tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_theory/covariance.html">Construction of the fit covariance matrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_theory/rotation.html">Basis rotation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_theory/projections.html">Projections</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Fitting code:</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="code_struct.html">Code structure</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">How to run the code</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">SMEFiT Tutorial</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Reports:</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../report/tools.html">Report functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../report/running.html">Produce a report</a></li>
<li class="toctree-l1"><a class="reference internal" href="../report/links.html">Link to reports</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Previous studies:</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../previous_releases/smefit_rw.html">SMEFiT RW</a></li>
<li class="toctree-l1"><a class="reference internal" href="../previous_releases/smefit_top.html">SMEFiT Top</a></li>
<li class="toctree-l1"><a class="reference internal" href="../previous_releases/smefit_vbs.html">SMEFiT VBS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../previous_releases/smefit20.html">SMEFiT2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../previous_releases/smefit_uv.html">The automation of SMEFT-Assisted Constraints on UV-Complete Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../previous_releases/smefit30.html">SMEFiT3.0</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Collaboration:</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../people/people.html">People</a></li>

</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">References &amp; API:</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../modules/smefit/smefit.html">API</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../modules/smefit/smefit.analyze.html">smefit.analyze package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/smefit/smefit.cli.html">smefit.cli package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/smefit/smefit.optimize.html">smefit.optimize package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/smefit/smefit.postfit.html">smefit.postfit package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/smefit/smefit.prefit.html">smefit.prefit package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/smefit/smefit.projections.html">smefit.projections package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/smefit/smefit.rge.html">smefit.rge package</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../zzz-refs.html">References</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/fitting_code/running.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>How to run the code</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#runcard-specifications">Runcard specifications</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#input-and-output-path">Input and output path</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#theory-specifications">Theory specifications</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#minimizer-specifications">Minimizer specifications</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#datasets-to-consider-and-coefficients-to-fit">Datasets to consider and coefficients to fit</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#constrains-between-coefficients">Constrains between coefficients</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fit-in-different-basis">Fit in different basis</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-custom-likelihoods">Adding custom likelihoods</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-rg-evolution">Adding RG evolution</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-a-fit-with-ns">Running a fit with NS</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-a-fit-with-mc">Running a fit with MC</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#solving-the-linear-problem">Solving the linear problem</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#single-parameter-fits">Single parameter fits</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#individual-parameter-scan">Individual parameter scan</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="how-to-run-the-code">
<span id="running-fit"></span><h1>How to run the code<a class="headerlink" href="#how-to-run-the-code" title="Link to this heading">#</a></h1>
<p>Here we provide some instructions on how to use the code for the various
running modes and on how to analyse its results.</p>
<section id="runcard-specifications">
<span id="runcard"></span><h2>Runcard specifications<a class="headerlink" href="#runcard-specifications" title="Link to this heading">#</a></h2>
<p>First of all, the basic object required to run the code is the runcard.
In this section we document the settings that need to be specified here. Example runcards are available from the separate
repository <a class="reference external" href="https://github.com/LHCfitNikhef/smefit_database">smefit_database</a>. This repository also contains the theory predictions and experimental data files used in the
latest smefit publications.</p>
<p>Clone the <code class="docutils literal notranslate"><span class="pre">smefit_database</span></code> repository, and run</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">python update_runcards_path.py -d /path/to/runcard/destination/ runcards/A_LHC_NLO_LIN_GLOB.yaml</span>
</pre></div>
</div>
<p>This will create a <code class="docutils literal notranslate"><span class="pre">smefit</span></code> runcard in <code class="docutils literal notranslate"><span class="pre">/path/to/runcard/destination/</span></code> ready to be used,
pointing to the experimental data and theory tables in the repository <code class="docutils literal notranslate"><span class="pre">smefit_database</span></code>.
The user can change this manually if other datasets are desired.</p>
<section id="input-and-output-path">
<h3>Input and output path<a class="headerlink" href="#input-and-output-path" title="Link to this heading">#</a></h3>
<p>The folder where the results will be saved can be set using <code class="docutils literal notranslate"><span class="pre">result_path</span></code>. The file containing
the posterior of the fitted Wilson coefficient will be saved in <code class="docutils literal notranslate"><span class="pre">resulth_path/result_ID</span></code>.
If <code class="docutils literal notranslate"><span class="pre">result_ID</span></code> is not provided, it will be automatically set to the name of the runcard (and any already existing result will be overwritten).</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">result_ID</span><span class="p">:</span>
<span class="nt">result_path</span><span class="p">:</span>
<span class="nt">data_path</span><span class="p">:</span>
<span class="nt">theory_path</span><span class="p">:</span>
</pre></div>
</div>
</section>
<section id="theory-specifications">
<h3>Theory specifications<a class="headerlink" href="#theory-specifications" title="Link to this heading">#</a></h3>
<p>The default perturbative order of the theory prediction is set by the key <code class="docutils literal notranslate"><span class="pre">default_order</span></code>. Orders may also be specified
per datset, see <a class="reference external" href="./example.html#datasets-to-consider-and-coefficients-to-fit">here</a> for more details.
The order in the EFT expansion should be specified by setting <code class="docutils literal notranslate"><span class="pre">use_quad</span></code> to either <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code> to include quadratic or only linear corrections respectively. The option <code class="docutils literal notranslate"><span class="pre">use_t0</span></code> controls the use
of the <code class="docutils literal notranslate"><span class="pre">t0</span></code> prescription and <code class="docutils literal notranslate"><span class="pre">use_theory_covmat</span></code> specifies whether or not to use the theory covariance matrix
which can be specified in the theory files.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">default_order</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LO</span>
<span class="nt">use_quad</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="nt">use_t0</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="nt">use_theory_covmat</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="nt">cutoff_scale</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000</span>
</pre></div>
</div>
<p>Here <code class="docutils literal notranslate"><span class="pre">cutoff_scale</span></code> specifies the scale (in GeV) above which all datapoints will be excluded from the fit.</p>
</section>
<section id="minimizer-specifications">
<h3>Minimizer specifications<a class="headerlink" href="#minimizer-specifications" title="Link to this heading">#</a></h3>
<p>The different parameters controlling the minimizer used in the analysis are specified here.
If <code class="docutils literal notranslate"><span class="pre">single_parameter_fits</span></code> is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, the Wilson coefficient specified in the run-card
will be fit one at time, setting all the others to 0. See <a class="reference external" href="./example.html#single-parameter-fits">here</a> for more details.
If <code class="docutils literal notranslate"><span class="pre">pairwise_fits</span></code> is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, the minimizer carries out an automated series of pair-wise fits to all possible pairs of
Wilson coefficients that  are specified in the run-card.</p>
<p>Float32 format is supported only with |NS|.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>smefit<span class="w"> </span>NS<span class="w"> </span>--float32<span class="w"> </span>path/to/the/runcard/runcard.yaml
</pre></div>
</div>
<p>Pairwise fits are supported only with |NS|.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">pairwise_fits</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="nt">single_parameter_fits</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="nt">bounds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Null</span>

<span class="c1"># NS settings</span>
<span class="nt">nlive</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">400</span><span class="w"> </span><span class="c1"># number of live points used during sampling</span>
<span class="nt">lepsilon</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.05</span><span class="w"> </span><span class="c1">#  Terminate when live point likelihoods are all the same, within Lepsilon tolerance.</span>
<span class="nt">target_evidence_unc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span><span class="w"> </span><span class="c1"># target evidence uncertanty</span>
<span class="nt">target_post_unc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span><span class="w"> </span><span class="c1"># target posterior uncertanty</span>
<span class="nt">frac_remain</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.01</span><span class="w"> </span><span class="c1"># Set to a higher number (0.5) if you know the posterior is simple.</span>
<span class="nt">store_raw</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"> </span><span class="c1"># if true, store the raw result and enable resuming the job.</span>
<span class="nt">vectorized</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"> </span><span class="c1"># if true, ultranest samples a vector from the prior (recommended for large scale problems)</span>
<span class="nt">cluster_num_live_points</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">150</span><span class="w"> </span><span class="c1"># number of live points per cluster, set to 3 * npar by default</span>


<span class="c1">#MC settings</span>
<span class="nt">mc_minimiser</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;cma&#39;</span><span class="w"> </span><span class="c1"># Allowed options are: &#39;cma&#39;, &#39;dual_annealing&#39;, &#39;trust-constr&#39;</span>
<span class="nt">restarts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7</span><span class="w"> </span><span class="c1"># number of restarts (only for cma)</span>
<span class="nt">maxiter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100000</span><span class="w"> </span><span class="c1"># max number of iteration</span>
<span class="nt">chi2_threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.0</span><span class="w"> </span><span class="c1"># post fit chi2 threshold</span>

<span class="c1">#A settings</span>
<span class="nt">n_samples</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000</span><span class="w"> </span><span class="c1"># number of the required samples of the posterior distribution</span>
</pre></div>
</div>
</section>
<section id="datasets-to-consider-and-coefficients-to-fit">
<h3>Datasets to consider and coefficients to fit<a class="headerlink" href="#datasets-to-consider-and-coefficients-to-fit" title="Link to this heading">#</a></h3>
<p>The datasets and Wilson coefficients to be included in the analysis must be listed under <code class="docutils literal notranslate"><span class="pre">datasets</span></code>
and <code class="docutils literal notranslate"><span class="pre">coefficients</span></code> respectively. The default order for each dataset is taken from  <code class="docutils literal notranslate"><span class="pre">default_order</span></code>. However, it is
possible to specify specific settings per dataset. For each data set, one may specify the perturbative order (<code class="docutils literal notranslate"><span class="pre">order</span></code>) and/or the
theory covariance variant (<code class="docutils literal notranslate"><span class="pre">theory_cov</span></code>) to be used. The latter is useful for fits to future collider data where different theory
uncertainty scenarios may be explored. For example,</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">datasets</span><span class="p">:</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ATLAS_tt_8TeV_ljets_Mtt</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ATLAS_tt_8TeV_dilep_Mtt</span>
<span class="w">    </span><span class="nt">order</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NLO_QCD</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CMS_tt_8TeV_ljets_Ytt</span>
<span class="w">    </span><span class="nt">order</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NLO_QCD</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CMS_tt2D_8TeV_dilep_MttYtt</span>
<span class="w">    </span><span class="nt">order</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NLO_QCD</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CMS_tt_13TeV_ljets_2015_Mtt</span>
<span class="w">    </span><span class="nt">order</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NLO_QCD</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CMS_tt_13TeV_dilep_2015_Mtt</span>
<span class="w">    </span><span class="nt">order</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NLO_QCD</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CMS_tt_13TeV_ljets_2016_Mtt</span>
<span class="w">    </span><span class="nt">order</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NLO_QCD</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CMS_tt_13TeV_dilep_2016_Mtt</span>
<span class="w">    </span><span class="nt">order</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NLO_QCD</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ATLAS_tt_13TeV_ljets_2016_Mtt</span>
<span class="w">    </span><span class="nt">order</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NLO_QCD</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ATLAS_CMS_tt_AC_8TeV</span>
<span class="w">    </span><span class="nt">order</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NLO_QCD</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FCCee_Zdata</span>
<span class="w">    </span><span class="nt">order</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LO</span>
<span class="w">    </span><span class="nt">theory_cov</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aggressive</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>


<span class="c1"># Coefficients to fit</span>
<span class="nt">coefficients</span><span class="p">:</span>

<span class="w">  </span><span class="nt">OpQM</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&#39;min&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">-10</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;max&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">10</span><span class="p p-Indicator">}</span>
<span class="w">  </span><span class="nt">O3pQ3</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&#39;min&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">-2.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;max&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">2.0</span><span class="p p-Indicator">}</span>
<span class="w">  </span><span class="nt">Opt</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&#39;min&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">-25.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;max&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">15.0</span><span class="p p-Indicator">}</span>
<span class="w">  </span><span class="nt">OtW</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&#39;min&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">-1.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;max&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">1.0</span><span class="p p-Indicator">}</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
<p>As exemplified above, the syntax to specify the Wilson coefficient corresponding to the operator
<code class="docutils literal notranslate"><span class="pre">O1</span></code> is <code class="docutils literal notranslate"><span class="pre">O1</span> <span class="pre">:</span> <span class="pre">{'min':</span> <span class="pre">,</span> <span class="pre">'max':}</span> </code> where <code class="docutils literal notranslate"><span class="pre">min</span></code> and <code class="docutils literal notranslate"><span class="pre">max</span></code> indicate the bounds within
the sampling is performed. The theory covariance variant specified in this case is <code class="docutils literal notranslate"><span class="pre">theory_cov_aggressive</span></code>, which
should be defined in the theory files.</p>
</section>
<section id="constrains-between-coefficients">
<h3>Constrains between coefficients<a class="headerlink" href="#constrains-between-coefficients" title="Link to this heading">#</a></h3>
<p>Some Wilson coefficients are not directly fit, but rather constrained to be linear combinations
of the other ones. Taking as example some coefficient of the Higgs sector considered in <code class="docutils literal notranslate"><span class="pre">smefit2.0</span></code>,
this can be specified in the runcard in the following way</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nt">OpWB</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&#39;min&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">-0.3</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;max&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">0.5</span><span class="p p-Indicator">}</span>
<span class="w">  </span><span class="nt">OpD</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&#39;min&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">-1.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;max&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">1.0</span><span class="p p-Indicator">}</span>
<span class="w">  </span><span class="nt">OpqMi</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&#39;constrain&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[{</span><span class="s">&#39;OpD&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">0.9248</span><span class="p p-Indicator">},{</span><span class="s">&#39;OpWB&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">1.8347</span><span class="p p-Indicator">}],</span><span class="w"> </span><span class="s">&#39;min&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">-30</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;max&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">30</span><span class="p p-Indicator">}</span>
<span class="w">  </span><span class="nt">O3pq</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&#39;constrain&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[{</span><span class="s">&#39;OpD&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">-0.8415</span><span class="p p-Indicator">},{</span><span class="s">&#39;OpWB&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">-1.8347</span><span class="p p-Indicator">}],</span><span class="w"> </span><span class="s">&#39;min&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">-0.5</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;max&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">1.0</span><span class="p p-Indicator">}</span>
</pre></div>
</div>
<p>In this example the coefficients <code class="docutils literal notranslate"><span class="pre">CpqMi</span></code> and <code class="docutils literal notranslate"><span class="pre">C3pq</span></code> correspondong to the operators
<code class="docutils literal notranslate"><span class="pre">OpqMi</span></code> and <code class="docutils literal notranslate"><span class="pre">O3pq</span></code> will be set to</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">CpqMi = 0.9248*CpD + 1.8347*CpWB</span>
<span class="l l-Scalar l-Scalar-Plain">C3pq = -0.8415*CpD -1.8347*CpWB</span>
</pre></div>
</div>
</section>
<section id="fit-in-different-basis">
<h3>Fit in different basis<a class="headerlink" href="#fit-in-different-basis" title="Link to this heading">#</a></h3>
<p>It is possible to run a fit using a different basis.
In this case the coefficients specified in the runcard should be the ones to fit, and
a rotation basis defining the new basis in terms of the Warsaw basis should be given as input. This can be done
using the option below.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">rot_to_fit_basis</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/path/to/rotation/rotation.json</span>
</pre></div>
</div>
<p>In addition, it is possible to perform a fit in a PCA rotated basis. This corresponds to the basis spanned
by the eigenvectors of the Fisher information matrix at the linear level in the EFT expansion. To carry out such a fit,
add the following flag</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>smefit<span class="w"> </span>NS<span class="w"> </span>--rotate_to_pca<span class="w"> </span>path/to/the/runcard/runcard.yaml
</pre></div>
</div>
</section>
<section id="adding-custom-likelihoods">
<span id="ns"></span><h3>Adding custom likelihoods<a class="headerlink" href="#adding-custom-likelihoods" title="Link to this heading">#</a></h3>
<p>SMEFiT supports the addition of customised likelihoods. This can be relevant when an external likelihood is already at hand
and one would like to combine it with the one constructed internally in SMEFiT. To make use of this feature, one should add
the following to the runcard:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">external_chi2</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ExternalChi2</span><span class="p">:</span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/path/to/external/chi2.py</span>
<span class="w">    </span><span class="nt">param1</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">val1</span>
<span class="w">    </span><span class="nt">param2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">val2</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
<p>Here, <code class="docutils literal notranslate"><span class="pre">ExternalChi2</span></code> is the name of the class that must be defined in the referenced python file as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>


<span class="k">class</span><span class="w"> </span><span class="nc">ExternalChi2</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coefficients</span><span class="p">,</span> <span class="n">rge_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">param1</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">param2</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor that allows one to set attributes that can be called in the compute_chi2 method</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        coefficients:  smefit.coefficients.CoefficientManager</span>
<span class="sd">            attributes: name, value</span>
<span class="sd">        rge_dict: dict</span>
<span class="sd">            RGE dictionary from the runcard</span>
<span class="sd">        **kwargs: Additional keyword arguments.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">coefficients_names</span> <span class="o">=</span> <span class="n">coefficients</span><span class="o">.</span><span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">param1</span> <span class="o">=</span> <span class="n">param1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">param2</span> <span class="o">=</span> <span class="n">param2</span>
        <span class="o">...</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">compute_chi2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coefficient_values</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">         coefficient_values : numpy.ndarray</span>
<span class="sd">            |EFT| coefficients values</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># example</span>
        <span class="n">chi2_value</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">coefficient_values</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">chi2_value</span>
</pre></div>
</div>
<p>The parameters <code class="docutils literal notranslate"><span class="pre">coefficients</span></code> and <code class="docutils literal notranslate"><span class="pre">rge_dict</span></code> are mandatory, while the following ones are optional.  One
is free to pass an arbitrary number of parameters in the runcard and later set custom attributes in the constructor.
Note that the RGE matrix has to be computed inside the constructor. Some examples are available
in <code class="docutils literal notranslate"><span class="pre">external_chi2/</span></code>. The coefficient values during optimisation are accessible via <code class="docutils literal notranslate"><span class="pre">coefficient_values</span></code> in
the <code class="docutils literal notranslate"><span class="pre">compute_chi2</span></code> method. In order for the external chi2 to work, it is important one does not change
the name of the <code class="docutils literal notranslate"><span class="pre">compute_chi2</span></code> method!</p>
</section>
<section id="adding-rg-evolution">
<h3>Adding RG evolution<a class="headerlink" href="#adding-rg-evolution" title="Link to this heading">#</a></h3>
<p>Renormalisation group evolution can be turned on in the fit by adding the following to the runcard.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">rge</span><span class="p">:</span>
<span class="w">  </span><span class="nt">init_scale</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5000.0</span>
<span class="w">  </span><span class="nt">obs_scale</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dynamic</span><span class="w"> </span><span class="c1"># float or &quot;dynamic&quot;</span>
<span class="w">  </span><span class="nt">smeft_accuracy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integrate</span><span class="w"> </span><span class="c1"># options: integrate, leadinglog</span>
<span class="w">  </span><span class="nt">yukawa</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">top</span><span class="w"> </span><span class="c1"># options: top, full or none</span>
<span class="w">  </span><span class="nt">adm_QCD</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span><span class="w"> </span><span class="c1"># if true, the EW couplings are set to zero</span>
<span class="w">  </span><span class="nt">rg_matrix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;path/to/rge_matrix.pkl&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="running-a-fit-with-ns">
<h2>Running a fit with NS<a class="headerlink" href="#running-a-fit-with-ns" title="Link to this heading">#</a></h2>
<p>To run a fiy using Nested Sampling use the command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>smefit<span class="w"> </span>NS<span class="w"> </span>path/to/the/runcard/runcard.yaml
</pre></div>
</div>
<p>This will generate a file named <code class="docutils literal notranslate"><span class="pre">posterior.json</span></code> in the result folder,
containing the posterior distribution of the coefficients specified in the runcard.</p>
</section>
<section id="running-a-fit-with-mc">
<span id="mc"></span><h2>Running a fit with MC<a class="headerlink" href="#running-a-fit-with-mc" title="Link to this heading">#</a></h2>
<p><strong>Disclaimer</strong>: the MC mode is only supported for linear fits.</p>
<p>The basic command to run a fit using Monte Carlo is</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="w">    </span>smefit<span class="w"> </span>MC<span class="w"> </span>path/to/the/runcard/runcard.yaml<span class="w"> </span>-n<span class="w"> </span>replica_number
</pre></div>
</div>
<p>This will produce a file called <code class="docutils literal notranslate"><span class="pre">replica_&lt;replica_number&gt;/coefficients_rep_&lt;replica_number&gt;.json</span></code>
in the result folder, containing the values of the Wilson coefficients for the replica.
Once an high enough number of replicas have been produced, the results can be merged into the final posterior
running PostFit</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="w">    </span>smefit<span class="w"> </span>POSTFIT<span class="w"> </span>path/to/the/result/<span class="w"> </span>-n<span class="w"> </span>number_of_replicas
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">&lt;number_of_replicas&gt;</span></code> specifies the number of replicas to be used to build the posterior.
Replicas not satisfying the PostFit criteria will be discarded. If the final number of good replicas is lower than
<code class="docutils literal notranslate"><span class="pre">&lt;number_of_replicas&gt;</span></code> the code will output an error message asking to produce more replicas first.
The final output is the file <code class="docutils literal notranslate"><span class="pre">posterior.json</span></code> containing the full posterior of the Wilson coefficients.</p>
</section>
<section id="solving-the-linear-problem">
<h2>Solving the linear problem<a class="headerlink" href="#solving-the-linear-problem" title="Link to this heading">#</a></h2>
<p>In case only linear cocrrections are used, one
can find the analytic solution to the linear problem by</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="w">    </span>smefit<span class="w"> </span>A<span class="w"> </span>path/to/the/runcard/runcard.yaml
</pre></div>
</div>
<p>This will also sample the posterior distribution according to the runcard.</p>
</section>
<section id="single-parameter-fits">
<h2>Single parameter fits<a class="headerlink" href="#single-parameter-fits" title="Link to this heading">#</a></h2>
<p>Given a runcard with a number of Wilson coefficients specified, it is possible to fit each of them in turn,
keeping all the other ones fix to 0.
To do this add to the runcard</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">single_parameter_fits</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
</pre></div>
</div>
<p>and proceed as documented above for a normal fit.
For both <code class="docutils literal notranslate"><span class="pre">NS</span></code> and <code class="docutils literal notranslate"><span class="pre">A</span></code> the final output will be the file <code class="docutils literal notranslate"><span class="pre">fit_results.json</span></code>
containing the independent posterior of the fitted Wilson coefficients, obtained by a series of independent single parameter fits.</p>
<p>It is possible to perform single paramters in the presence of multiple constraints. For example</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">single_parameter_fits</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="nt">uv_couplings</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="nt">coefficients</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># Free params</span>
<span class="w">  </span><span class="nt">OWWW</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&#39;min&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">-3</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;max&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">3</span><span class="p p-Indicator">}</span>
<span class="w">  </span><span class="nt">Opq1</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&#39;min&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">-3</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;max&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">3</span><span class="p p-Indicator">}</span>
<span class="w">  </span><span class="nt">Opq3</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&#39;min&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">-3</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;max&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">3</span><span class="p p-Indicator">}</span>

<span class="w">  </span><span class="c1">## To fix ##</span>
<span class="w">  </span><span class="nt">OpqMi</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&#39;constrain&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[{</span><span class="s">&#39;Opq1&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">1</span><span class="p p-Indicator">},</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&#39;Opq3&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">-1</span><span class="p p-Indicator">}],</span><span class="w"> </span><span class="s">&#39;min&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">-2</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;max&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">2</span><span class="w"> </span><span class="p p-Indicator">}</span>
<span class="w">  </span><span class="nt">O3pq</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&#39;constrain&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[{</span><span class="s">&#39;Opq3&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">1</span><span class="p p-Indicator">}],</span><span class="w"> </span><span class="s">&#39;min&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">-1</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;max&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">1</span><span class="w"> </span><span class="p p-Indicator">}</span>
</pre></div>
</div>
<p>performs a single parameter fit for <code class="docutils literal notranslate"><span class="pre">OWWW</span></code>, <code class="docutils literal notranslate"><span class="pre">Opq1</span></code> and <code class="docutils literal notranslate"><span class="pre">Opq3</span></code>. Note that this requires <code class="docutils literal notranslate"><span class="pre">uv_couplings</span></code> to be set to
True (this allows you to fit parameters that do not appear in the theory tables). The naming <code class="docutils literal notranslate"><span class="pre">uv_couplings</span></code> stems from fitting with
constraints among Wilson coefficients and UV parameters.</p>
</section>
<section id="individual-parameter-scan">
<h2>Individual parameter scan<a class="headerlink" href="#individual-parameter-scan" title="Link to this heading">#</a></h2>
<p>The code can also be used to produce 1-dimensional scans of the chi2 function.
The command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="w">    </span>smefit<span class="w"> </span>SCAN<span class="w"> </span>/path/to/the/runcard/runcard.yaml
</pre></div>
</div>
<p>will produce in the results folder a series of pdf files containing plots for
1-dimensional scans of the chi2 with respect to each parameter in the runcard.</p>
<p>This is in general done for Wilson coefficients, but if one is interested in a specific UV model and in particular to perform a mass scan, SMEFiT allows for this specific case.
The way it works is that in the runcard, one specifies</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">uv_couplings</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="nt">coefficients</span><span class="p">:</span>
<span class="w">  </span><span class="c1">## To fix ##</span>
<span class="w">  </span><span class="nt">OpqMi</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&#39;constrain&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[{</span><span class="s">&#39;m&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.24</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-2</span><span class="p p-Indicator">]},</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&#39;m&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.5</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-4</span><span class="p p-Indicator">]}],</span><span class="w"> </span><span class="s">&#39;min&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">-2</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;max&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">2</span><span class="w"> </span><span class="p p-Indicator">}</span>

<span class="w">  </span><span class="c1"># Mass parameter</span>
<span class="w">  </span><span class="nt">m</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">is_mass</span><span class="p">:</span><span class="w"> </span><span class="nv">True</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;min&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">0.2</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;max&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">100.0</span><span class="p p-Indicator">}</span>
</pre></div>
</div>
<p>and when performing the scan, it will recognise that this is a mass scan and only the mass will be scanned. Note that the mass values are assumed to be specified in TeV.</p>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="code_struct.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Code structure</p>
      </div>
    </a>
    <a class="right-next"
       href="tutorial.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">SMEFiT Tutorial</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#runcard-specifications">Runcard specifications</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#input-and-output-path">Input and output path</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#theory-specifications">Theory specifications</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#minimizer-specifications">Minimizer specifications</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#datasets-to-consider-and-coefficients-to-fit">Datasets to consider and coefficients to fit</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#constrains-between-coefficients">Constrains between coefficients</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fit-in-different-basis">Fit in different basis</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-custom-likelihoods">Adding custom likelihoods</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-rg-evolution">Adding RG evolution</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-a-fit-with-ns">Running a fit with NS</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-a-fit-with-mc">Running a fit with MC</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#solving-the-linear-problem">Solving the linear problem</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#single-parameter-fits">Single parameter fits</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#individual-parameter-scan">Individual parameter scan</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Jaco ter Hoeve, Luca Mantani, Alejo Rossia, Giacomo Magni, Tommaso Giani and Juan Rojo
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
       Copyright 2025, the SMEFiT developers&#39; team.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>